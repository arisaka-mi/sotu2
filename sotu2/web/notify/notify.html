<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>通知一覧</title>
<style>
    body { font-family: Arial; background: #f6f6f6; padding: 20px; }
    .notification-box {
        background: #fff;
        padding: 15px;
        margin-bottom: 12px;
        border-radius: 6px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .unread {
        background: #e8f3ff; /* 未読は淡いブルー */
        border-left: 4px solid #007bff;
    }
    .type { font-weight: bold; }
    .time { font-size: 12px; color: #555; margin-top: 6px; }
</style>
</head>
<body>

<h2>通知</h2>
<div id="notificationArea">読み込み中…</div>

<script>
// ページ読み込み時に通知を取得
fetch("get_notifications.php")
    .then(res => res.json())
    .then(data => {
        const area = document.getElementById("notificationArea");
        area.innerHTML = "";

        if (data.length === 0) {
            area.innerHTML = "<p>通知はありません。</p>";
            return;
        }

        data.forEach(notify => {
            const div = document.createElement("div");
            div.classList.add("notification-box");
            if (notify.is_read == 0) div.classList.add("unread");

            // notify_type によってメッセージを切り替える
            let message = "";
            switch (notify.notify_type) {
                case "like":
                    message = `ユーザー ${notify.actor_user_id} があなたの投稿(${notify.tweet_id})に「いいね」しました`;
                    break;
                case "comment":
                    message = `ユーザー ${notify.actor_user_id} があなたの投稿(${notify.tweet_id})にコメントしました`;
                    break;
                case "follow":
                    message = `ユーザー ${notify.actor_user_id} があなたをフォローしました`;
                    break;
                default:
                    message = `ユーザー ${notify.actor_user_id} から: ${notify.notify_type}`;
                    break;
            }

            div.innerHTML = `
                <div class="type">${message}</div>
                <div class="time">通知ID: ${notify.id}</div>
            `;

            area.appendChild(div);
        });
    })
    .catch(err => {
        document.getElementById("notificationArea").innerHTML =
            "<p>通知を読み込めませんでした。</p>";
        console.error(err);
    });
</script>

</body>
</html>
